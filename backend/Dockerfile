FROM openjdk:17-alpine

ARG JAR_FILE=target/sample-ecommerce-0.1.jar
ADD ${JAR_FILE} ecom_demo.jar

export ASTRA_DB_ID=${ASTRA_DB_ID}
export ASTRA_DB_REGION=${ASTRA_DB_REGION}
export ASTRA_DB_APP_TOKEN=${ASTRA_DB_APP_TOKEN}
export ASTRA_DB_KEYSPACE=ecommerce
export ASTRA_STREAM_TENANT=${ASTRA_STREAM_TENANT}
export ASTRA_STREAM_URL=${ASTRA_STREAM_URL}
export ASTRA_STREAM_TOKEN=${ASTRA_STREAM_TOKEN}
export GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
export GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}

EXPOSE 8080

ENTRYPOINT ["java","-jar","/ecom_demo.jar"]
